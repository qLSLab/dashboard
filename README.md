# Dashboard

Genome-scale metabolic models are increasingly used tools for providing full functional state readout of given organisms. Metabolic models are valued allies in supporting wet experiments for the design of new engineered organism platforms able to perform novel functions and produce new desired compounds. Nevertheless, tools able to reconstruct the corresponding digital twins by merging content of new pathways according to the knowledge stored into already available metabolic models are still missing. In this regard, we propose an open-source python-based framework that can be used to load, curate, reconstruct and integrate metabolic networks, yielding SBML integrated models that are ready for further analyses.

## Documentation
The documentation to install and use the dashboard is included in the Wiki.

## How to use dashboard
The dashboard consists of six panels reported here below:
* Backbone model
* New model
* Create integrated model
* Constrain integrated model
* Simulate model
* Mapping simulated fluxes

### Backbone model
The backbone model panel aims at defining the metabolic model that will be used as backbone for the reconstruction in the second panel of the newly defined model.
In this panel user has to firstly choose from a dropdown menu entitled "Choose the organism name" the name of the organism under investigation. Once defined, user has to indicate if he/she wants to upload a backbone model. More in detail, the question "Do you want to upload a backbone model?" gives the user two possibilities. In case of negative answer, user can only click on the below button "Proceed" in order to go to the second panel. On the contrary, in case of positive answer, new components appear. In particular, the application asks user to "Load the backbone model" from a local folder. Clicking on the "Select Files" area, a new window is open where user may choose the target file. Once file is selected, a new string appear below the uploading file area indicating "The selected backbone model is:" followed by the file name. On the contrary, until any file is uploaded, user will se the string "ATTENTION: You have not selected any backbone model." that warm him/her that he/she chose to select a backbone model but any file has been already uploaded.
The application then asks user if he/she want or not to curate the selected model ("Do you want to curate the backbone model?"). In case of positive answer, the application also asks under the question "Do you want to add external files to curate the backbone model?" if user has additional information to integrate during the curation process regarding new reactions to be added, boundaries and/or GPR rules to be fixed. In case of positive answer, for each aspect to be integrated, user has the possibility to upload an external file from a local folder where this information is available, or to directly input data in a table located under the file selection area. In the first case, when the target file is selected, the string "You selected the following file: " appear followed by the selected file name, and a preview of the loaded dataset is shown just below in the table with the possibility to edit each cell, add new empty rows or remove already existing selected rows by respectively clicking on the "Add empty row" and "Remove selected rows" buttons. As declared by the application, in case changes are introduced in the uploaded file, user has to download the newly generated file version by clicking on the "Download table". In the second case, if any file is already ready to be used, user may directly input data in the empty table provided just below the file selection area. Also in this case the "Add empty row" and "Remove selected rows" buttons are available to, respectively, allow user add new empty rows or remove selected rows, and the "Download table" button is ready to be used to export the final table when user has input all the desired data.
Once all data are correctly submitted and all the options are set, user may click on the "Save and Proceed" button in order to proceed to the backbone model curation. Once the process will be finished, a message will appear to warn user that the folder name where the resulting curated model has been saved, and that therefore he/she may proceed to the second panel by clicking on the below button "Next".

### New model
The new model panel aims at reconstructing the new models defining new engineered organism platforms.
In this panel, the application firstly ask user to "Input the name of the new model" in the provided blank space, which will be used as file name of the final SBML model. Until any string is entered, the message "ATTENTION: You have not entered any name." will warn user that he/she needs to input a name. When the desired string is submitted, a new message appears where the string "You entered the following name: " is followed by the entered name.
The second step required by the user is the loading of the file including the reactions he/she wants to add to the new model ("Load the file including the list of reactions of the new model. Any change here introduced in the uploaded file needs table to be exported."). User has the possibility to upload an external file from a local folder where this information is available, or to directly input data in a table located under the file selection area. In the first case, when the target file is selected, the string "You selected the following file: " appear followed by the selected file name, and a preview of the loaded dataset is shown just below in the table with the possibility to edit each cell, add new empty rows or remove already existing selected rows by respectively clicking on the "Add empty row" and "Remove selected rows" buttons. As declared by the application, in case changes are introduced in the uploaded file, user has to download the newly generated file version by clicking on the "Download table". If any file is already ready to be used, a message under the file selection area appears telling user that any file has been selected and therefore he/she has to directly fill and than export the table located below this message ("ATTENTION: You have not selected any file. Please fill and then export the table below"). Also in this case the "Add empty row" and "Remove selected rows" buttons are available to, respectively, allow user to add new empty rows or remove selected rows, and the "Download table" button is ready to be used to export the final table when user has input all the desired data.
Once all data are correctly submitted, user may click on the "Generate the model" button in order to proceed to model reconstruction starting from the list of input reactions and using the backbone model in order to assign identifiers to metabolites already present avoiding that the same compound is differently called. When the process is ended, a new table appear below including a list of putative exchange reactions for the model formulated on the basis of the direction of the newly defined reactions. In this table, each cell is editable and user has the possibility to add new empty rows or remove already existing selected rows by respectively clicking on the "Add empty row" and "Remove selected rows" buttons. In case changes are introduced in the proposed table, user has to download the modified table by clicking on the "Download table". Otherwise, the initially proposed table version is automatically exported.
By then clicking on the "Close the newly generated model" button, the exchange reactions are included into the new model. At the end of this process, a message will appear warning user where the resulting model has been saved, and telling him/her that he/she may proceed to the third panel by clicking on the below button "Next".

### Create integrated model
The Create integrated model panel aims at reconstructing the integrated model by merging the backbone model defined in the first panel and the new model defined in the second panel. In this panel, the application asks user to click on the "Merge models" button in order to merge the input models. At the end of the process, a message will appear warning user that the backbone and the new models have been merged, and where the resulting model has been saved. Finally, the application tells user that he/she may proceed to the fourth panel by clicking on the below button "Next".

### Constrain integrated model
The Constrain integrated model aims at constraining the built integrated model using experimental data. In particular, the application asks user to upload data about the composition of the adopted wet medium and/or consumption or production fluxes of measured compounds. In particular, the dashboard asks user to "input a label to define your condition", which will be used to define the file name of the constrained model. Under the "Load the file including the wet medium composition" and the "Load the file including the extracellular production and consumption rates" sections, user is required to load the files including the required data or to directly input data in the provided empty tables. The application finally asks user to click on the "Constrain model" button in order to constrain the input model according to the input datasets. At the end of the process, a message will appear warning user where the resulting model has been saved, and that user may proceed to the fifth panel by clicking on the below button "Next".

### Simulate model
The Simulate model panel aims at simulating the constrained models. In particular, the application first asks user to "choose the model to simulate" from the homonymous dropdown menu. Once model is chosen, the included reactions are listed in a dropdown menu labelled as "Choose the reaction to set as objective function" to let user to choose the reaction he/she wants to set as objective function for the simulations. User has to then select the type of simulation he/she wants to perform among the Flux Balance Analysis, the parsimonious Flux Balance Analysis, and the Flux Variability Analysis by selecting the corresponding option from the "Which type of simulation you want to run?" choice menu. Finally, user has to "Input a string to label models simulations" in order to define the simulation output file name. Once all the required data are input, the application asks user to click on the "Simulate models" button in order to proceed to model simulation. At the end of this process, a message will appear warning user where the resulting simulation output file has been saved, and telling him/her that he/she may proceed to the sixth and last panel by clicking on the below button "Next".

### Mapping simulated fluxes
The resulting flux distribution may be mapped in the sixth and last panel called "Map the flux distribution". User is first required to select from the "Where do you want to map fluxes?" choice menu if the pathways maps of the KEGG database or an own SVG map of the model will be used as scaffold for the flux mapping. In the first case, the multiple choice menu "If multiple reactions identifiers map on the same reaction arrow in the map, you want to map:" allows user to choose flux mapping type when multiple reactions identifiers map on the same reaction arrow in the map. Once defined this option, user has to click on the "Map fluxes on KEGG maps" to proceed with the flux mapping. In the second case, application asks user to select the SVG map representing the model, and then to click "Map fluxes on SVG map" to proceed with the flux mapping. In both cases, model reactions will be coloured according to the corresponding flux value. Moreover, in case the user generates the input flux distribution by running a Flux Variability Analysis, the application asks to select from the multiple choice menu labelled as "Since you run a Flux Variability Analysis, you want to map:" what user wants to map by choosing to map the minimum flux of each reaction ("Minimum fluxes"), the maximum flux of each reaction ("Maximum fluxes"), the difference between the maximum and the minimum flux ("Flux variations as arrows width"), the minimum flux of each reaction as reaction color and the difference between the maximum and the minimum flux as reaction width ("Minimum fluxes with flux variation as arrows width"), the maximum flux of each reaction as reaction color and the difference between the maximum and the minimum flux as reaction width   ("Maximum fluxes with flux variation as arrows width"). Once the flux mapping is finished, a message will appear warning user where the resulting maps have been saved, and telling him/her that he/she may close the dashboard.

## Getting Help
For support, please contact:
* Dario Pescini (dario.pescini@unimib.it)
* Marzia Di Filippo (marzia.difilippo@unimib.it)
* Ennio Guzmán (e.guzmancolmenares@campus.unimib.it)

